#!/usr/bin/env sh
. "$(dirname "$0")/h"

echo "üîç Running Prettier on staged files..."

# Get staged files that are added, copied, or modified
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(js|jsx|ts|tsx|json|css|scss|md|html)$')

if [ -z "$STAGED_FILES" ]; then
  echo "‚úÖ No relevant staged files to format."
  exit 0
fi

# Run Prettier to format the files
npx prettier --write $STAGED_FILES

# Re-add the files that were formatted
echo "$STAGED_FILES" | xargs git add

echo "‚úÖ Prettier formatting complete and files re-staged."

exit 0